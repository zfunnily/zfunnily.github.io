<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>《Unity Shader入门精要》第四章笔记 | 学习Shader所需的数学基础 | Zzz记忆</title>
<meta property="og:title" content="《Unity Shader入门精要》第四章笔记 | 学习Shader所需的数学基础 - Zzz记忆"><meta property="og:type" content="article"><meta name=color-scheme content="light dark"><meta property="article:published_time" content="2022-04-10T15:42:33+08:00"><meta property="article:modified_time" content="2024-01-04T01:03:29+08:00"><meta name=Keywords content="skynet开发,skynet源码解析,skynet框架分析,golang,C++,游戏服务器,lua开发 ,IM服务器"><meta name=description content="《Unity Shader入门精要》第四章笔记 | 学习Shader所需的数学基础"><meta name=author content="留白"><meta property="og:url" content="https://zfunnily.github.io/2022/04/shadermathematic/"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/style.css><script type=text/javascript src=/js/jquery.js></script><link href=/js/jquery.fancybox.css rel=stylesheet><link rel=stylesheet type=text/css href=/css/bilibili.css><script id=LA_COLLECT src=/js/js-sdk-pro.min.js></script><script>LA.init({id:"JXzIfjoKHVwu0mwG",ck:"JXzIfjoKHVwu0mwG"})</script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><a id=logo href=https://zfunnily.github.io/>Zzz记忆</a><div id=quotes class=description></div></div><div><nav id=nav-menu class=clearfix><a class=current href=https://zfunnily.github.io/>首页</a>
<a href=https://zfunnily.github.io/thinking/ title=随想>随想</a>
<a href=https://zfunnily.github.io/archives/ title=归档>归档</a>
<a href=https://zfunnily.github.io/about/ title=关于>关于</a>
<a href=https://zfunnily.github.io/search/ title=搜索>搜索</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><style type=text/css>.post-toc{position:fixed;width:200px;margin-left:-210px;padding:5px 10px;font-family:Athelas,STHeiti,Microsoft Yahei,serif;font-size:12px;border:1px solid rgba(0,0,0,7%);border-radius:5px;background-color:rgba(255,255,255,.98);background-clip:padding-box;-webkit-box-shadow:1px 1px 2px rgba(0,0,0,.125);box-shadow:1px 1px 2px rgba(0,0,0,.125);word-wrap:break-word;white-space:nowrap;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:999;cursor:pointer;max-height:70%;overflow-y:auto;overflow-x:hidden}.post-toc .post-toc-title{width:100%;margin:0 auto;font-size:20px;font-weight:400;text-transform:uppercase;text-align:center}.post-toc .post-toc-content{font-size:15px}.post-toc .post-toc-content>nav>ul{margin:10px 0}.post-toc .post-toc-content ul{padding-left:20px;list-style:square;margin:.5em;line-height:1.8em}.post-toc .post-toc-content ul ul{padding-left:15px;display:none}@media print,screen and (max-width:1057px){.post-toc{display:none}}</style><div class=post-toc style=position:absolute;top:188px;mix-blend-mode:difference><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#概述>概述</a></li><li><a href=#笛卡儿坐标系>笛卡儿坐标系</a><ul><li><a href=#二维笛卡儿坐标系>二维笛卡儿坐标系</a></li><li><a href=#三维笛卡儿坐标系>三维笛卡儿坐标系</a></li><li><a href=#左手坐标系和右手坐标系>左手坐标系和右手坐标系</a></li><li><a href=#判断是左手还是右手坐标系>判断是左手还是右手坐标系</a></li><li><a href=#unity使用的坐标系>Unity使用的坐标系</a></li><li><a href=#练习题>练习题</a></li></ul></li><li><a href=#点和矢量>点和矢量</a><ul><li><a href=#矢量运算>矢量运算</a></li><li><a href=#矢量加法的三角形定则>矢量加法的三角形定则</a></li><li><a href=#矢量的模>矢量的模</a></li><li><a href=#单位矢量>单位矢量</a></li><li><a href=#零矢量>零矢量</a></li><li><a href=#矢量的点积>矢量的点积</a></li><li><a href=#点积的性质>点积的性质</a></li><li><a href=#点积公式>点积公式</a></li><li><a href=#点积的几何意义>点积的几何意义</a></li><li><a href=#矢量的叉积>矢量的叉积</a></li></ul></li><li><a href=#矩阵运算>矩阵运算</a><ul><li><a href=#矩阵和标量的乘法>矩阵和标量的乘法</a></li><li><a href=#矩阵和矩阵的乘法>矩阵和矩阵的乘法</a></li><li><a href=#矩阵乘法满足一些性质>矩阵乘法满足一些性质</a></li><li><a href=#特殊的矩阵>特殊的矩阵</a></li><li><a href=#转置矩阵常用的性质>转置矩阵常用的性质</a></li><li><a href=#逆矩阵-todo>逆矩阵 TODO</a></li><li><a href=#正交矩阵>正交矩阵</a></li></ul></li><li><a href=#矩阵的几何意义-变换>矩阵的几何意义: 变换</a><ul><li><a href=#什么是变换>什么是变换</a></li></ul></li><li><a href=#坐标空间>坐标空间</a></li><li><a href=#法线变换>法线变换</a></li><li><a href=#unity内置变换>Unity内置变换</a></li></ul></nav></div></div><script type=text/javascript>$(document).ready(function(){if(e=$(".post-toc"),e.length){t=$("#main").offset().left,t<220&&e.css({width:t-10,"margin-left":0-t});var e,t,n=e.offset().top-20,s={start:{position:"absolute",top:n},process:{position:"fixed",top:20}};$(window).scroll(function(){var t=$(window).scrollTop();t<n?e.css(s.start):e.css(s.process)})}})</script><article class=post><header><h1 class=post-title>《Unity Shader入门精要》第四章笔记 | 学习Shader所需的数学基础</h1></header><date class="post-meta meta-date">2022年4月10日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=/categories/%E7%BC%96%E7%A8%8B>编程</a></span>
<span class=meta-category><a href=/categories/%E7%BC%96%E7%A8%8B.UnityShader>编程.UnityShader</a></span></div><div class=clear style=display:none><div class=toc-article><div class=toc-title>文章目录</div></div></div><div class=post-content><h2 id=概述>概述</h2><p>在学习Shader的过程中，我们最常使用的就是矢量和矩阵（即数学的分支之一——线性代数）。</p><h2 id=笛卡儿坐标系>笛卡儿坐标系</h2><p>我们使用数学绝大部分都是为了计算位置、距离和角度等变量。而这些计算大部分都是在笛卡儿坐标系 （Cartesian Coordinate System） 下进行的。这个名字来源于法国伟大的哲学家、物理学家、心理学家、数学家笛卡儿（René Descartes）。</p><h3 id=二维笛卡儿坐标系>二维笛卡儿坐标系</h3><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495841628441649584162708.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495841628441649584162708.png>
</a>一个二维的笛卡儿坐标系包含了两个部分的信息：</p><ul><li>一个特殊的位置，即原点，它是整个坐标系的中心；</li><li>两条过原点的互相垂直的矢量，即x 轴和y 轴。这些坐标轴也被称为是该坐标系的基矢量。</li></ul><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495842387471649584238674.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495842387471649584238674.png></a></p><h3 id=三维笛卡儿坐标系>三维笛卡儿坐标系</h3><p>在三维笛卡儿坐标系中，我们需要定义3个坐标轴和一个原点:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495842867001649584285723.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495842867001649584285723.png></a></p><p>这3个坐标轴也被称为是该坐标系的基矢量 （basis vector） 。</p><ul><li>通常情况下，这 3 个坐标轴之间是互相垂直的，且长度为1，这样的基矢量被称为标准正交基 （orthonormal basis）</li><li>在一些坐标系中坐标轴之间互相垂直但长度不为1，这样的基矢量被称为正交基 （orthogonal basis） 。</li></ul><blockquote><p>正交可以理解成互相垂直的意思</p></blockquote><p>二维笛卡儿坐标系类似，三维笛卡儿坐标系中的坐标轴方向也不是固定的，即不一定是像图4.6中那样的指向。但这种不同导致了两种不同种类的坐标系：<strong>左手坐标系 （left-handed coordinate space）</strong> 和<strong>右手坐标系 （right-handed coordinate space）</strong> 。</p><h3 id=左手坐标系和右手坐标系>左手坐标系和右手坐标系</h3><p>为什么在三维笛卡儿坐标系中要区分左手坐标系和右手坐标系:</p><ul><li>在二维笛卡儿坐标系中，x 轴和y 轴的指向虽然可能不同，但我们总可以通过一些旋转操作来使它们的坐标轴指向相同。 从这种意义上来说，所有的二维笛卡儿坐标系都是等价的。</li><li>对于三维笛卡儿坐标系，靠这种旋转有时并不能使两个不同朝向的坐标系重合, 我们总可以让其中两个坐标轴的指向重合，但第三个坐标轴的指向有可能是相反的。</li></ul><p>我们可以利用我们的双手来判断一个坐标系的旋向性。请读者举起你的左手，用食指和大拇指摆出一个“L”的手势，并且让你的食指指向上，大拇指指向右。现在，伸出你的中指，不出意外的话它应该指向你的前方，即可得到一个左手坐标系.</p><p>左手坐标系如下图:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495847727801649584772705.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495847727801649584772705.png></a></p><p>通过右手来得到一个右手坐标系。举起你的右手，这次食指仍然指向上，中指指向前方，不同的是，大拇指将指向左侧, 即可得到一个右手坐标系.</p><p>右手坐标系如下图:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495848467171649584846484.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495848467171649584846484.png></a></p><h3 id=判断是左手还是右手坐标系>判断是左手还是右手坐标系</h3><p>判断前向 （forward） 的方向。</p><ol><li>向右伸直你的右手，此时右手方向就是x 轴的正向，而你的头顶向上的方向就是y 轴的正向。</li><li>这时，如果你的正前方的方向是z 轴的正向，那么你本身所在的坐标系就是一个左手坐标系；</li><li>如果你的正前方的方向对应的是z 轴的负向，那么这就是一个右手坐标系。</li></ol><p>左手法则和右手法则的简单说明:</p><ul><li>举起你的左手，握拳，伸出大拇指让它指向旋转轴的正方向，那么旋转的正方向就是剩下4个手指的弯曲方向 在右手坐标系中，使用右手法则对旋转正方向的判断类似</li><li>在左手坐标系中，旋转正方向是顺时针的，而在右手坐标系中，旋转正方向是逆时针的</li></ul><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495855027551649585502502.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495855027551649585502502.png></a></p><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495858457471649585845217.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495858457471649585845217.png></a></p><h3 id=unity使用的坐标系>Unity使用的坐标系</h3><ol><li>对于模型空间和世界空间来说Unity使用的是左手坐标系。</li></ol><p>在模型空间中，一个物体的右侧（right）、上侧（up）和前侧（forward）分别对应了x 轴、y 轴和z 轴的正方向。
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495859397511649585939399.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495859397511649585939399.png></a></p><ol start=2><li>于观察空间来说，Unity使用的是右手坐标系。</li></ol><p>观察空间，通俗来讲就是以摄像机为原点的坐标系。在这个坐标系中，摄像机的前向是z 轴的负方向，这与在模型空间和世界空间中的定义相反。也就是说，z 轴坐标的减少意味着场景深度的增加。
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495860487831649586048720.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495860487831649586048720.png></a></p><h3 id=练习题>练习题</h3><p>（1）在非常流行的建模软件3ds Max中，默认的坐标轴方向是：x 轴正方向指向右方，y 轴正方向指向前方，z 轴正方向指向上方。那么它是左手坐标系还是右手坐标系？</p><p>右手坐标系</p><p>（2）在左手坐标系中，有一点的坐标是（0, 0, 1），如果把该点绕y 轴正方向旋转+90°，旋转后的坐标是什么？如果是在右手坐标系中，同样有一点坐标为（0, 0, 1），把它绕y 轴正方向旋转+90°，旋转后的坐标是什么？</p><p>（3）在Unity中，新建的场景中主摄像机的位置位于世界空间中的（0, 1, −10）位置。在不改变摄像机的任何设置（如保持Rotation为(0, 0, 0)，Scale为（1, 1, 1））的情况下，在世界空间中的(0, 1, 0)位置新建一个球体，如图4.14所示。
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495862487601649586248046.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495862487601649586248046.png></a></p><h2 id=点和矢量>点和矢量</h2><ul><li>点 （point） 是n 维空间（游戏中主要使用二维和三维空间）中的一个位置，它没有大小、宽度这类概念</li><li>矢量的模指的是这个矢量的长度。一个矢量的长度可以是任意的非负数。</li><li>矢量的方向则描述了这个矢量在空间中的指向。</li><li>矢量被用于表示相对于某个点的偏移（displacement）</li></ul><h3 id=矢量运算>矢量运算</h3><ol><li>矢量和标量乘法/除法
我们只需要把矢量的每个分量和标量相乘即可</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>kv =(kvx ,kvy , kvz )
</span></span></code></pre></div><p>一个矢量也可以被一个非零的标量除
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495908191671649590818764.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495908191671649590818764.png>
</a><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495908398971649590839135.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495908398971649590839135.png>
</a>对于乘法来说，矢量和标量的位置可以互换。但对于除法，只能是矢量被标量除，而不能是标量被矢量除，这是没有意义的。</p><ol start=2><li>矢量的加法和减法
两个矢量进行相加或相减，其结果是一个相同维度的新矢量</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>a +b =(ax +bx ,ay +by , az +bz )
</span></span><span style=display:flex><span>a –b =(ax −bx ,ay -by , az −bz )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(1,2,3)+(4,5,6)=(5,7,9)
</span></span><span style=display:flex><span>(5,2,7) − (3,8,4)=(2, −6,3)
</span></span></code></pre></div><blockquote><p>一个矢量不可以和一个标量相加或相减，或者是和不同维度的矢量进行运算</p></blockquote><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495911529051649591152776.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495911529051649591152776.png></a></p><h3 id=矢量加法的三角形定则>矢量加法的三角形定则</h3><p>如果我们从一个起点开始进行了一个位置偏移a ，然后又进行一个位置偏移b ，那么就等同于进行了一个a +b 的位置偏移.
这被称为矢量加法的三 角形定则（triangle rule） 。矢量的减法是类似的
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495911359061649591135524.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495911359061649591135524.png></a></p><h3 id=矢量的模>矢量的模</h3><p>矢量的模是一个标量，可以理解为是矢量在空间中的长度。它的表示符号通常是在矢量两旁分别加上一条垂直线（有的文献中会使用两条垂直线）.</p><p>三维矢量的模的计算公式如下:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495912519081649591251514.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495912519081649591251514.png></a></p><blockquote><p>对每个分量的平方相加后再开根号就能得到一个矢量的模。
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495913119101649591311462.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495913119101649591311462.png></a></p></blockquote><h3 id=单位矢量>单位矢量</h3><p>在计算光照模型时，我们往往需要得到顶点的法线方向和光源方向，此时我们不关心这些矢量有多长.在这种情况下我们就需要计算单位矢量。</p><ul><li>单位矢量指的是那些模为1的矢量。</li><li>单位矢量也被称为被归一化的矢量（normalized vector） 。对任何给定的非零矢量，把它转换成单位矢量的过程就被称为归一化（normalization） 。</li></ul><p>我们通过在一个矢量的头上添加一个戴帽符号来表示单位矢量，例如。为了对矢量进行归一化，我们可以用矢量的模除以该矢量来得到</p><p>公式如下:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495915759181649591575610.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495915759181649591575610.png></a></p><p>示例如下:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495915959201649591595589.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495915959201649591595589.png></a></p><h3 id=零矢量>零矢量</h3><p>零矢量 （即矢量的每个分量值都为0，如v =(0,0,0)）是不可以被归一化的。这是因为做除法运算时分母不能为0。</p><h3 id=矢量的点积>矢量的点积</h3><p>矢量的乘法有两种最常用的种类：点积 （dot product， 也被称为内积 ，inner product） 和叉积 （cross product， 也被称为外积 ，outer product） 。</p><h3 id=点积的性质>点积的性质</h3><ol><li>点积可结合标量乘法。</li></ol><p>点积的操作数之一可以是另一个运算的结果，即矢量和标量相乘的结果，也就是说对点积中其中一个矢量进行缩放的结果，相当于对最后的点积结果进行缩放。</p><p>公式如下:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>(k a )·b = a ·(k b )=k (a ·b )
</span></span></code></pre></div><ol start=2><li>点积可结合矢量加法和减法，和性质一类似。点积的操作数可以是矢量相加或相减后的结果</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>a ·(b + c )= a ·b + a ·c
</span></span></code></pre></div><ol start=3><li>一个矢量和本身进行点积的结果，是该矢量的模的平方。
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495929979661649592997812.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495929979661649592997812.png></a></li></ol><h3 id=点积公式>点积公式</h3><ol><li><p>公式一
两个三维矢量的点积是把两个矢量对应分量相乘后再取和，最后的结果是一个标量
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495919219281649591920953.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495919219281649591920953.png>
</a>矢量的点积满足交换律，即a ·b =b ·a</p></li><li><p>公式二, 两个矢量的点积可以表示为两个矢量的模相乘，再乘以它们之间夹角的余弦值</p></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>a ·b =｜a ｜｜b ｜cosθ
</span></span></code></pre></div><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495937020401649593701855.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495937020401649593701855.png>
</a>证明过程：</p><ul><li>上图是两个单位矢量点积示意图</li><li>我们对两个单位矢量进行点积a ·b，单位矢量的模是1.</li><li>直角边/斜边 = consθ</li><li>cosθ = (a ·b) / |b|</li><li>|b| = 1</li><li>(a ·b) = cosθ</li></ul><p>应用性质一就可以得到公式二了
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495915759181649591575610.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495915759181649591575610.png>
</a><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495941069941649594106107.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495941069941649594106107.png></a></p><p>当夹角小于90°时，cosθ >0；当夹角等于90°时，cosθ =0；当夹角大于90°时，cosθ &lt;0。</p><h3 id=点积的几何意义>点积的几何意义</h3><p>点积的几何意义很重要，因为点积几乎应用到了图形学的各个方面。其中一个几何意义就是投影 （projection） 。</p><p>假设，有一个<strong>单位矢量</strong>和另一个长度不限的矢量b 。现在，我们希望得到b 在平行于a的一条直线上的投影。那么，我们就可以使用点积b 来得到b 在方向上的有符号的投影。</p><p>投影的通俗解释是 现在有一个光源，它发出的光线是垂直于方向的，那么b 在方向上的投影就是b 在方向上的影子</p><p>投影的值可能是负数。投影结果的正负号与和b 的方向有关：</p><ul><li>当它们的方向相反（夹角大于90°）时，结果小于0；</li><li>当它们的方向互相垂直（夹角为90°）时，结果等于0；</li><li>当它们的方向相同（夹角小于90°）时，结果大于0</li></ul><p><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495922969401649592296274.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495922969401649592296274.png>
</a><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495926239501649592623173.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495926239501649592623173.png></a></p><h3 id=矢量的叉积>矢量的叉积</h3><p>另一个重要的矢量运算就是叉积 （cross product） ，也被称为外积 （outer product） 。与点积不同的是，矢量叉积的结果仍是一个矢量，而非标量.</p><p>两个矢量的叉积可以用如下公式:
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495945273851649594526415.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495945273851649594526415.png>
</a><a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495946283601649594627573.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495946283601649594627573.png></a></p><ul><li>叉积不满足交换律, 即a ×b≠b×a</li><li>叉积是满足反交换律的，即a ×b =−(b ×a )</li><li>叉积也不满足结合律，即 (a ×b ) ×c ≠a ×(b ×c )。</li></ul><p>a ×b 的长度等于a 和b 的模的乘积再乘以它们之间夹角的正弦值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>｜a×b ｜=｜a ｜｜b ｜sinθ
</span></span></code></pre></div><p>使用左手坐标系还是右手坐标系不会对叉积的计算结果产生任何影响，它影响的只是数字在三维空间中的视觉化表现而已</p><h2 id=矩阵运算>矩阵运算</h2><h3 id=矩阵和标量的乘法>矩阵和标量的乘法</h3><p>和矢量类似，矩阵也可以和标量相乘，它的结果仍然是一个相同维度的矩阵
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495951113731649595110441.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495951113731649595110441.png></a></p><h3 id=矩阵和矩阵的乘法>矩阵和矩阵的乘法</h3><p>两个矩阵的乘法也很简单，它们的结果会是一个新的矩阵</p><ul><li>一个r ×n 的矩阵A 和一个n ×c 的矩阵B 相乘，它们的结果AB 将会是一个r ×c 大小的矩阵</li><li>第一个矩阵的列数必须和第二个矩阵的行数相同</li><li>它们相乘得到的矩阵的<strong>行数是第一个矩阵的行数</strong>, <strong>列数是第二个矩阵的列数</strong></li></ul><p>设有r ×n 的矩阵A 和一个n ×c 的矩阵B ，它们相乘会得到一个r ×c 的矩阵C =AB 。那么，C 中的每一个元素cij 等于A 的第i 行所对应的矢量和B 的第j 列所对应的矢量进行矢量点乘的结果.
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495957303931649595729872.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495957303931649595729872.png></a></p><p>对于每个元素cij ，我们找到A 中的第i 行和B 中的第j 列，然后把它们的对应元素相乘后再加起来，这个和就是cij 。</p><p>举个例子来理解这个公式，如下图：
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495959363981649595935987.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495959363981649595935987.png></a></p><h3 id=矩阵乘法满足一些性质>矩阵乘法满足一些性质</h3><ol><li>性质一：矩阵乘法并不满足交换律。</li><li>性质二：矩阵乘法满足结合律。</li></ol><h3 id=特殊的矩阵>特殊的矩阵</h3><ol><li>方块矩阵（square matrix） ，简称方阵，是指那些行和列数目相等的矩阵。在三维渲染里，最常使用的就是3×3和4×4的方阵。</li></ol><p>如果一个矩阵除了对角元素外的所有元素都为0，那么这个矩阵就叫做对角矩阵 （diagonal matrix）
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495960694041649596068758.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495960694041649596068758.png></a></p><p>2．单位矩阵, 任何矩阵和它相乘的结果都还是原来的矩阵</p><p>一个特殊的对角矩阵是单位矩阵 （identity matrix） ，用I n 来表示。一个3×3的单位矩阵如下
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495960984031649596098203.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495960984031649596098203.png></a></p><ol start=3><li>转置矩阵（transposed matrix） 实际是对原矩阵的一种运算，即转置运算</li></ol><p>给定一个r ×c 的矩阵M ，它的转置可以表示成M T ，这是一个c ×r 的矩阵。转置矩阵的计算非常简单，我们只需要把原矩阵翻转一下即可, 原矩阵的第i 行变成了第i 列，而第j 列变成了第j 行。</p><p>数学公式如下：
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495962944091649596293847.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495962944091649596293847.png></a></p><p>对于行矩阵和列矩阵来说，我们可以使用转置操作来转换行列矩阵
<a data-fancybox=gallery href=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495963544141649596354130.png><img class=mx-auto alt src=https://raw.githubusercontent.com/zfunnily/PictureUtools/main/unityshader/16495963544141649596354130.png></a></p><h3 id=转置矩阵常用的性质>转置矩阵常用的性质</h3><ul><li>性质一：矩阵转置的转置等于原矩阵。</li><li>性质二：矩阵串接的转置，等于反向串接各个矩阵的转置。</li></ul><h3 id=逆矩阵-todo>逆矩阵 TODO</h3><p>逆矩阵 （inverse matrix） 大概是本书讲到的关于矩阵最复杂的一种操作了。不是所有的矩阵都有逆矩阵，第一个前提就是，该矩阵必须是一个方阵。</p><h3 id=正交矩阵>正交矩阵</h3><p>正交是矩阵的一种属性。如果一个方阵M 和它的转置矩阵的乘积是单位矩阵的话，我们就说这个矩阵是正交的 （orthogonal）</p><ul><li>矩阵的每一行，即c 1 、c 2 和c 3 是单位矢量，因为只有这样它们与自己的点积才能是1；</li><li>矩阵的每一行，即c 1 、c 2 和c 3 之间互相垂直，因为只有这样它们之间的点积才能是0。</li></ul><p>上述两条结论对矩阵的每一列同样适用，因为如果M 是正交矩阵的话，M^T 也会是正交矩阵。</p><h2 id=矩阵的几何意义-变换>矩阵的几何意义: 变换</h2><h3 id=什么是变换>什么是变换</h3><p>变换 （transform） ，指的是我们把一些数据，如点、方向矢量甚至是颜色等，通过某种方式进行转换的过程</p><h2 id=坐标空间>坐标空间</h2><h2 id=法线变换>法线变换</h2><h2 id=unity内置变换>Unity内置变换</h2><h4 align=center>--完--</h4></div><div class=post-archive><ul class=post-copyright><li><strong>原文作者：</strong>
<a rel=author href=https://zfunnily.github.io/>留白</a></li><li style=word-break:break-all><strong>原文链接：</strong>
<a href=https://zfunnily.github.io/2022/04/shadermathematic/>https://zfunnily.github.io/2022/04/shadermathematic/</a></li><li style=word-break:break-all><strong>更新时间：</strong>2024-01-04 01:03:29</li><li><strong>本文声明：</strong>转载请标记原文作者及链接</li></ul></div><br><div class=post-archive><h2>See Also</h2><ul class=listing><li><a href=/2022/04/shadermathematic/>《Unity Shader入门精要》第四章笔记 | 学习Shader所需的数学基础</a></li><li><a href=/2022/04/shaderbase/>《Unity Shader入门精要》第三章笔记| UnityShader基础</a></li><li><a href=/2022/04/shaderbase/>《Unity Shader入门精要》第三章笔记| UnityShader基础</a></li><li><a href=/2022/04/shaderrenderpipline/>《Unity Shader入门精要》第二章笔记 | 渲染流水线</a></li><li><a href=/2022/04/shaderrenderpipline/>《Unity Shader入门精要》第二章笔记 | 渲染流水线</a></li></ul></div><div class="post-meta meta-tags"><ul class=clearfix><li><a href=/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0>读书笔记</a></li></ul></div></article><div id=cusdis_thread data-host=https://cusdis-vercel-five.vercel.app data-app-id=01429b04-b016-4c60-99b1-2e11e67ec4c1 data-page-id=751b891d7eaf7f64362f06b8a68f4506 data-page-url=https://zfunnily.github.io/2022/04/shadermathematic/ data-page-title="《Unity Shader入门精要》第四章笔记 | 学习Shader所需的数学基础"></div><script async defer src=https://cusdis-vercel-five.vercel.app/js/cusdis.es.js></script></div><footer id=footer><div>&copy; 2024 <a href=https://zfunnily.github.io/>Zzz记忆 By 留白</a></div><br><div><div class=github-badge><a href=https://gohugo.io/ target=_black rel=nofollow><span class=badge-subject>Powered by</span><span class="badge-value bg-blue">Hugo</span></a></div><div class=github-badge><a href=https://www.flysnow.org/ target=_black><span class=badge-subject>Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a></div><div class=github-badge><a href=https://github.com/flysnow-org/maupassant-hugo target=_black><span class=badge-subject>Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a></div></div><div><script id=LA-DATA-WIDGET crossorigin=anonymous src="https://v6-widget.51.la/v6/JXzIfjoKHVwu0mwG/quote.js?theme=0&f=12"></script></div></footer><script type=text/javascript>window.MathJax={tex2jax:{inlineMath:[["$","$"]],processEscapes:!0}}</script><script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><script src=/js/jquery.fancybox.min.js></script><a id=rocket href=#top></a><script type=text/javascript src='/js/totop.js?v=0.0.0' async></script></div><div id=secondary><section class=widget><form id=search action=https://zfunnily.github.io/search/ method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=https://zfunnily.github.io/>
<button type=submit class="submit icon-search"></button></form></section><section class=widget><h3 class=widget-title>最近文章</h3><ul class=widget-list><li><a href=https://zfunnily.github.io/2023/12/30/ title=11月>11月</a></li><li><a href=https://zfunnily.github.io/2023/11/30/ title=11月>11月</a></li><li><a href=https://zfunnily.github.io/2023/11/wsl2/ title=WSL2改为桥接>WSL2改为桥接</a></li><li><a href=https://zfunnily.github.io/2023/11/python/ title=Python3.7安装>Python3.7安装</a></li><li><a href=https://zfunnily.github.io/2023/11/mysql/ title="Docker | Mysql 挂载目录一键部署">Docker | Mysql 挂载目录一键部署</a></li></ul><h3 class=widget-title>随想</h3><ul class=widget-list><li><a href=https://zfunnily.github.io/thinking/2022/03/shuowang/ title="无聊 & 痛苦">无聊 & 痛苦</a></li><li><a href=https://zfunnily.github.io/thinking/2022/03/think01/ title=爬楼有感>爬楼有感</a></li><li><a href=https://zfunnily.github.io/thinking/2022/03/weekly01/ title=老纪>老纪</a></li><li><a href=https://zfunnily.github.io/thinking/2022/03/summarize/ title=2021焦虑总结>2021焦虑总结</a></li><li><a href=https://zfunnily.github.io/thinking/2022/01/jx/ title=转载｜江雪：长安十日>转载｜江雪：长安十日</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/categories/>分类</a></h3><ul class=widget-list><li><a href=https://zfunnily.github.io/categories/AI/>AI (1)</a></li><li><a href=https://zfunnily.github.io/categories/IT/>IT (12)</a></li><li><a href=https://zfunnily.github.io/categories/IT.Linux/>IT.Linux (10)</a></li><li><a href=https://zfunnily.github.io/categories/NAS/>NAS (1)</a></li><li><a href=https://zfunnily.github.io/categories/SVN%E5%90%88%E5%B9%B6/>SVN合并 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E5%8D%9A%E5%AE%A2%E8%AE%B0%E4%BA%8B/>博客记事 (8)</a></li><li><a href=https://zfunnily.github.io/categories/%E6%80%BB%E7%BB%93%E6%80%BB%E7%BB%93.%E6%9C%88/>总结，总结.月 (2)</a></li><li><a href=https://zfunnily.github.io/categories/%E6%B8%B8%E6%88%8F/>游戏 (2)</a></li><li><a href=https://zfunnily.github.io/categories/%E6%B8%B8%E6%88%8F%E6%B8%B8%E6%88%8F.boss/>游戏，游戏.boss (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1/>游戏设计 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1.%E5%9C%B0%E5%9B%BE%E8%AE%BE%E8%AE%A1/>游戏设计.地图设计 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1.%E7%B1%BB%E9%93%B6%E6%B2%B3%E6%81%B6%E9%AD%94%E5%9F%8E/>游戏设计.类银河恶魔城 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%A7%91%E6%99%AE/>科普 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B/>编程 (116)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.C/>编程.C (9)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.Golang/>编程.Golang (26)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.Lua/>编程.Lua (5)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.P2P/>编程.P2P (4)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.Unity3D/>编程.Unity3D (2)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.UnityShader/>编程.UnityShader (24)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.Unity%E7%B2%92%E5%AD%90%E7%B3%BB%E7%BB%9F/>编程.Unity粒子系统 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.%E5%9B%BE%E5%BD%A2%E5%AD%A6%E5%85%A5%E9%97%A8/>编程.图形学入门 (2)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.%E6%B1%87%E7%BC%96/>编程.汇编 (2)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/>编程.游戏开发 (14)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.%E7%BC%96%E8%AF%91/>编程.编译 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/>编程.网络编程 (4)</a></li><li><a href=https://zfunnily.github.io/categories/%E7%BC%96%E7%A8%8B.%E9%9F%B3%E8%A7%86%E9%A2%91/>编程.音视频 (9)</a></li><li><a href=https://zfunnily.github.io/categories/%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/>自动部署 (18)</a></li><li><a href=https://zfunnily.github.io/categories/%E8%BD%AC%E8%BD%BD/>转载 (1)</a></li><li><a href=https://zfunnily.github.io/categories/%E9%9A%8F%E7%AC%94/>随笔 (5)</a></li><li><a href=https://zfunnily.github.io/categories/%E9%9A%8F%E7%AC%94.%E6%91%98%E6%8A%84/>随笔.摘抄 (2)</a></li></ul></section><section class=widget><h3 class=widget-title><a href=/tags/>标签</a></h3><div class=tagcloud><a href=https://zfunnily.github.io/tags/URP/>URP</a>
<a href=https://zfunnily.github.io/tags/cpu/>cpu</a>
<a href=https://zfunnily.github.io/tags/docker/>docker</a>
<a href=https://zfunnily.github.io/tags/except/>except</a>
<a href=https://zfunnily.github.io/tags/ffmpeg/>ffmpeg</a>
<a href=https://zfunnily.github.io/tags/gcc/>gcc</a>
<a href=https://zfunnily.github.io/tags/glibc/>glibc</a>
<a href=https://zfunnily.github.io/tags/hugo/>hugo</a>
<a href=https://zfunnily.github.io/tags/k8s/>k8s</a>
<a href=https://zfunnily.github.io/tags/music/>music</a>
<a href=https://zfunnily.github.io/tags/nginx/>nginx</a>
<a href=https://zfunnily.github.io/tags/nsf/>nsf</a>
<a href=https://zfunnily.github.io/tags/p2p/>p2p</a>
<a href=https://zfunnily.github.io/tags/randomquotes/>randomquotes</a>
<a href=https://zfunnily.github.io/tags/redis/>redis</a>
<a href=https://zfunnily.github.io/tags/rsync/>rsync</a>
<a href=https://zfunnily.github.io/tags/screen/>screen</a>
<a href=https://zfunnily.github.io/tags/shader/>shader</a>
<a href=https://zfunnily.github.io/tags/shader%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>shader学习笔记</a>
<a href=https://zfunnily.github.io/tags/shortcodes/>shortcodes</a>
<a href=https://zfunnily.github.io/tags/skynet/>skynet</a>
<a href=https://zfunnily.github.io/tags/vim/>vim</a>
<a href=https://zfunnily.github.io/tags/weekly/>weekly</a>
<a href=https://zfunnily.github.io/tags/year/>year</a>
<a href=https://zfunnily.github.io/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/>学习笔记</a>
<a href=https://zfunnily.github.io/tags/%E5%AE%9A%E6%97%B6%E5%99%A8/>定时器</a>
<a href=https://zfunnily.github.io/tags/%E6%8A%BD%E5%8D%A1/>抽卡</a>
<a href=https://zfunnily.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/>读书笔记</a>
<a href=https://zfunnily.github.io/tags/%E9%95%BF%E5%AE%89%E5%8D%81%E6%97%A5/>长安十日</a></div></section><section class=widget><h3 class=widget-title>友情链接</h3><ul class=widget-list><li><a target=_blank href=https://github.com/zfunnily title=留白的github>留白github</a></li></ul></section><section class=widget><h3 class=widget-title>其它</h3><ul class=widget-list><li><a href=https://zfunnily.github.io/index.xml>文章 RSS</a></li></ul></section></div></div></div></div></body></html>